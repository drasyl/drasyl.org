<!doctype html><html lang=en-us><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><title>drasyl 0.8.0 released with improved Hole Punching, Remote Controlling for CLI, and increased TUN Device performance | drasyl is a high-performance framework for rapid development of distributed applications</title><meta content="drasyl is an Overlay Network Framework for Rapid Development of Distributed P2P Applications" name=description><meta content name=keywords><meta name=theme-color content="#005e54"><meta name=author content="Heiko Bornholdt and Kevin Röbert"><meta property="og:title" content="drasyl 0.8.0 released with improved Hole Punching, Remote Controlling for CLI, and increased TUN Device performance"><meta property="og:description" content="
Today, we are excited to announce the release of drasyl 0.8.0 with improved hole punching protocol, remote controlling via JSON-RPC for node and tun CLI commands, and increased TUN device performance."><meta property="og:type" content="article"><meta property="og:url" content="https://drasyl.org/blog/drasyl-0-8-0-released/"><meta property="og:image" content="https://drasyl.org/img/jack-anstey-zS4lUqLEiNA-unsplash.jpg"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-07-10T12:14:00+01:00"><meta property="article:modified_time" content="2022-07-10T12:14:00+01:00"><link href=/img/favicon.png rel=icon><link href=/img/logo192.png rel=apple-touch-icon><link href=/manifest.json rel=manifest><link href=/vendor/aos/aos.css rel=stylesheet><link href=/vendor/bootstrap/css/bootstrap.min.css rel=stylesheet><link href=/vendor/bootstrap-icons/bootstrap-icons.css rel=stylesheet><link href=/vendor/boxicons/css/boxicons.min.css rel=stylesheet><link href=/scss/style.min.0ffde5caa31d8f939045c6e7b4e8c401c0a30a6d658222c0ac985c903913a8d4.css rel=stylesheet><link href=https://drasyl.org/blog/index.xml type=application/rss+xml title="drasyl Blog" rel=alternate></head><body class="single single-blog"><header id=header class="fixed-top header-inner-pages"><div class="container d-flex align-items-center unselectable"><a href=index.html class="logo me-auto"><img src=/img/drasyl.svg alt=drasyl class=img-fluid></a><nav id=navbar class=navbar><ul><li><a class="nav-link scrollto active" href=https://drasyl.org/>Home</a></li><li><a class=nav-link href=/blog>Blog</a></li><li><a class=nav-link href=https://docs.drasyl.org/>Documentation</a></li><li><a class=nav-link href=https://api.drasyl.org/>Javadoc</a></li><li><a class=nav-link href=https://github.com/drasyl/drasyl/blob/master/CONTRIBUTING.md>Contribution</a></li><li><a class=nav-link href=https://github.com/drasyl/drasyl/blob/master/CHANGELOG.md>Changelog</a></li><li><a class=getstarted href=https://docs.drasyl.org/getting-started/>Get Started</a></li></ul><i class="bi bi-list mobile-nav-toggle"></i></nav></div></header><main id=main><section id=breadcrumbs class=breadcrumbs><div class=container><div class=row><div class="col-xl-8 col-lg-12"><ol><li><a href=https://drasyl.org/>Home</a></li><li><a href=https://drasyl.org/blog>Blog</a></li><li></li></ol><h2>drasyl 0.8.0 released with improved Hole Punching, Remote Controlling for CLI, and increased TUN Device performance</h2><div>On <time>July 10, 2022</time>
in <a href=https://drasyl.org/tags/releases>Releases</a>, <a href=https://drasyl.org/tags/cli>CLI</a>
·
2 min read</div></div></div></div></section><section class=inner-page><div class=container><div class=row><div class="col-xl-8 col-lg-12"><div><p><img src=/img/jack-anstey-zS4lUqLEiNA-unsplash.jpg alt="aerial photography of road"></p><p>Today, we are excited to announce the release of drasyl 0.8.0 with improved hole punching protocol, remote controlling via JSON-RPC for <code>node</code> and <code>tun</code> CLI commands, and increased TUN device performance.</p><h3 id=changelog>Changelog</h3><h4 id=added>Added</h4><ul><li>NAT Traversal is now also able to establish a P2P connection if both devices are behind a shared
NAT device that does not support <a href=https://datatracker.ietf.org/doc/html/rfc4787#section-6>hairpinning</a>.</li><li>Node: Added <code>UnconfirmedAddressResolveHandler</code> that does send messages to unconfirmed (sender)
addresses as last-resort (before the messages were simply dropped).</li><li>CLI: Option <code>--mtu</code> to sub-command <code>tun</code> added.</li><li>CLI: Option <code>--rc-jsonrpc-tcp</code> and <code>--rc-jsonrpc-http</code> to sub-command <code>node</code> added.</li><li>CLI: <code>node-rc</code> sub-command added.</li><li>CLI: Option <code>--rc-jsonrpc-tcp</code> and <code>--rc-jsonrpc-http</code> to sub-command <code>tun</code> added.</li><li>CLI: <code>tun-rc</code> sub-command added.</li><li>CLI: <code>tun</code> command will not work within docker.</li></ul><h4 id=changed>Changed</h4><ul><li>CLI: Improve <code>tun</code> sub-command performance by tweaking default MTU size.</li><li>CLI: Instead of a random port, drasyl now listens on a port that is derived from the identity.</li><li>Dependencies have been updated.</li></ul><h4 id=fixed>Fixed</h4><ul><li>Internet discovery now regularly checks if the super peer DNS records have changed.</li><li>DrasylNode: Groups plugin is working again.</li><li><a href=https://github.com/google/guava>guava</a> dependency removed.</li></ul><h3 id=remote-controlling-a-drasyl-node>Remote Controlling a drasyl Node</h3><p>drasyl nodes started via the CLI command <code>node</code> can now be remotely controlled.
To do so, the node must be started with the parameter <code>--rc-jsonrpc-tcp</code> or <code>--rc-jsonrpc-http</code>.
A TCP or HTTP server is then started, listening on port 25421 (can be customized using the <code>--rc-bind</code> parameter).
This server waits for JSON-RPC requests.
Available methods are <code>events</code>, <code>identity</code>, <code>send</code>, <code>shutdown</code> and <code>start</code>.</p><p>Here you can see an example of how a node started via <code>--rc-jsonrpc-tcp</code> can be controlled remotely:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ telnet localhost <span style=color:#ae81ff>25421</span>
</span></span><span style=display:flex><span>Trying ::1...
</span></span><span style=display:flex><span>Connected to localhost.
</span></span><span style=display:flex><span>Escape character is <span style=color:#e6db74>&#39;^]&#39;</span>.
</span></span><span style=display:flex><span><span style=color:#75715e># get node identity</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span> <span style=color:#e6db74>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>, <span style=color:#e6db74>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;identity&#34;</span>, <span style=color:#e6db74>&#34;id&#34;</span>: 1<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span><span style=color:#e6db74>&#34;jsonrpc&#34;</span>:<span style=color:#e6db74>&#34;2.0&#34;</span>,<span style=color:#e6db74>&#34;result&#34;</span>:<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;agreementKeyPair&#34;</span>:<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;secretKey&#34;</span>:<span style=color:#e6db74>&#34;30786bd43bb65cf0e99dbf0e8ced360f2113caeec6776ffac0d0fa6befef5076&#34;</span>,<span style=color:#e6db74>&#34;publicKey&#34;</span>:<span style=color:#e6db74>&#34;998685bd4d088db0f238e43c6f63a6e5884c83ce5961c4b39bea5bc298eb6f38&#34;</span><span style=color:#f92672>}</span>,<span style=color:#e6db74>&#34;proofOfWork&#34;</span>:-2126604734,<span style=color:#e6db74>&#34;identityKeyPair&#34;</span>:<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;secretKey&#34;</span>:<span style=color:#e6db74>&#34;ba9ed4a6076ffb15413741f84df08978b9c96864b87781a5bf5b67587c4769c691fc08ba0fe62b872aa784674475adb5532aa257b4423bd48dd333555eb62d4b&#34;</span>,<span style=color:#e6db74>&#34;publicKey&#34;</span>:<span style=color:#e6db74>&#34;91fc08ba0fe62b872aa784674475adb5532aa257b4423bd48dd333555eb62d4b&#34;</span><span style=color:#f92672>}}</span>,<span style=color:#e6db74>&#34;id&#34;</span>:1<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e># start node</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span> <span style=color:#e6db74>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>, <span style=color:#e6db74>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;start&#34;</span>, <span style=color:#e6db74>&#34;id&#34;</span>: 2<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span><span style=color:#e6db74>&#34;jsonrpc&#34;</span>:<span style=color:#e6db74>&#34;2.0&#34;</span>,<span style=color:#e6db74>&#34;result&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,<span style=color:#e6db74>&#34;id&#34;</span>:2<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e># get received events/messages</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span> <span style=color:#e6db74>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>, <span style=color:#e6db74>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;events&#34;</span>, <span style=color:#e6db74>&#34;id&#34;</span>: 3<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span><span style=color:#e6db74>&#34;jsonrpc&#34;</span>:<span style=color:#e6db74>&#34;2.0&#34;</span>,<span style=color:#e6db74>&#34;result&#34;</span>:<span style=color:#f92672>[{</span><span style=color:#e6db74>&#34;node&#34;</span>:<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;port&#34;</span>:0,<span style=color:#e6db74>&#34;tcpFallbackPort&#34;</span>:0,<span style=color:#e6db74>&#34;identity&#34;</span>:<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;agreementKeyPair&#34;</span>:<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;secretKey&#34;</span>:<span style=color:#e6db74>&#34;30786bd43bb65cf0e99dbf0e8ced360f2113caeec6776ffac0d0fa6befef5076&#34;</span>,<span style=color:#e6db74>&#34;publicKey&#34;</span>:<span style=color:#e6db74>&#34;998685bd4d088db0f238e43c6f63a6e5884c83ce5961c4b39bea5bc298eb6f38&#34;</span><span style=color:#f92672>}</span>,<span style=color:#e6db74>&#34;proofOfWork&#34;</span>:-2126604734,<span style=color:#e6db74>&#34;identityKeyPair&#34;</span>:<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;secretKey&#34;</span>:<span style=color:#e6db74>&#34;ba9ed4a6076ffb15413741f84df08978b9c96864b87781a5bf5b67587c4769c691fc08ba0fe62b872aa784674475adb5532aa257b4423bd48dd333555eb62d4b&#34;</span>,<span style=color:#e6db74>&#34;publicKey&#34;</span>:<span style=color:#e6db74>&#34;91fc08ba0fe62b872aa784674475adb5532aa257b4423bd48dd333555eb62d4b&#34;</span><span style=color:#f92672>}}}</span>,<span style=color:#e6db74>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;NodeUpEvent&#34;</span><span style=color:#f92672>}</span>,<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;peer&#34;</span>:<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;address&#34;</span>:<span style=color:#e6db74>&#34;5b4578909bf0ad3565bb5faf843a9f68b325dd87451f6cb747e49d82f6ce5f4c&#34;</span><span style=color:#f92672>}</span>,<span style=color:#e6db74>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;PeerDirectEvent&#34;</span><span style=color:#f92672>}</span>,<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;node&#34;</span>:<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;port&#34;</span>:0,<span style=color:#e6db74>&#34;tcpFallbackPort&#34;</span>:0,<span style=color:#e6db74>&#34;identity&#34;</span>:<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;agreementKeyPair&#34;</span>:<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;secretKey&#34;</span>:<span style=color:#e6db74>&#34;30786bd43bb65cf0e99dbf0e8ced360f2113caeec6776ffac0d0fa6befef5076&#34;</span>,<span style=color:#e6db74>&#34;publicKey&#34;</span>:<span style=color:#e6db74>&#34;998685bd4d088db0f238e43c6f63a6e5884c83ce5961c4b39bea5bc298eb6f38&#34;</span><span style=color:#f92672>}</span>,<span style=color:#e6db74>&#34;proofOfWork&#34;</span>:-2126604734,<span style=color:#e6db74>&#34;identityKeyPair&#34;</span>:<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;secretKey&#34;</span>:<span style=color:#e6db74>&#34;ba9ed4a6076ffb15413741f84df08978b9c96864b87781a5bf5b67587c4769c691fc08ba0fe62b872aa784674475adb5532aa257b4423bd48dd333555eb62d4b&#34;</span>,<span style=color:#e6db74>&#34;publicKey&#34;</span>:<span style=color:#e6db74>&#34;91fc08ba0fe62b872aa784674475adb5532aa257b4423bd48dd333555eb62d4b&#34;</span><span style=color:#f92672>}}}</span>,<span style=color:#e6db74>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;NodeOnlineEvent&#34;</span><span style=color:#f92672>}</span>,<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;peer&#34;</span>:<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;address&#34;</span>:<span style=color:#e6db74>&#34;c0900bcfabc493d062ecd293265f571edb70b85313ba4cdda96c9f77163ba62d&#34;</span><span style=color:#f92672>}</span>,<span style=color:#e6db74>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;PeerDirectEvent&#34;</span><span style=color:#f92672>}]</span>,<span style=color:#e6db74>&#34;id&#34;</span>:3<span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Alternatively, the CLI also provides a built-in client with command <code>node-rc</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ drasyl node-rc identity
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;agreementKeyPair&#34;</span> : <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;secretKey&#34;</span> : <span style=color:#e6db74>&#34;30786bd43bb65cf0e99dbf0e8ced360f2113caeec6776ffac0d0fa6befef5076&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;publicKey&#34;</span> : <span style=color:#e6db74>&#34;998685bd4d088db0f238e43c6f63a6e5884c83ce5961c4b39bea5bc298eb6f38&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;proofOfWork&#34;</span> : -2126604734,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;identityKeyPair&#34;</span> : <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;secretKey&#34;</span> : <span style=color:#e6db74>&#34;ba9ed4a6076ffb15413741f84df08978b9c96864b87781a5bf5b67587c4769c691fc08ba0fe62b872aa784674475adb5532aa257b4423bd48dd333555eb62d4b&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;publicKey&#34;</span> : <span style=color:#e6db74>&#34;91fc08ba0fe62b872aa784674475adb5532aa257b4423bd48dd333555eb62d4b&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=modify-tun-device-routing-table-at-runtime>Modify TUN Device Routing Table at Runtime</h3><p>The routing table of the TUN device introduced with <a href=/blog/drasyl-0-7-0-released/>version 0.7.0</a> can now be modified at runtime.
This works the same way as the <code>node</code> command (see above).
The methods <code>add-route</code>, <code>identity</code>, <code>remove-route</code>, and <code>routes</code> are available.</p><p>Here, too, a client is supplied with <code>tun-rc</code>.</p><hr><p>Photo by <a href=https://unsplash.com/@jack_anstey>Jack Anstey</a> on <a href=https://unsplash.com/>Unsplash</a></p></div><div style=text-align:center;padding-top:40px><a href=https://drasyl.org/blog>← Back to index</a></div></div><div class=col-xl-1></div><div class="col-xl-3 col-lg-12"><h4>Related Posts</h4><ul class="list-group list-group-flush"><li class=list-group-item><a href=https://drasyl.org/blog/drasyl-0-7-0-released/>drasyl 0.7.0 released with TUN Device Support and Faster UDP Hole Punching</a></li><li class=list-group-item><a href=https://drasyl.org/blog/drasyl-0-6-0-released/>drasyl 0.6.0 released with Support for Netty Handlers, Backpressure Mechanism, and Tunnel Utility</a></li><li class=list-group-item><a href=https://drasyl.org/blog/drasyl-0-4-0-released/>drasyl 0.4.0 released with UDP Hole Punching, Message Chunking, and Bandwidth Measurement Utility</a></li><li class=list-group-item><a href=https://drasyl.org/blog/drasyl-0-2-0-released/>drasyl 0.2.0 released with Plugin Support, Message Marshaling, and a Wormhole!</a></li><li class=list-group-item><a href=https://drasyl.org/blog/drasyl-0-5-0-released/>drasyl 0.5.0 released with E2E Encryption, LAN Discovery, and TCP Fallback</a></li></ul></div></div></div></section></main><footer id=footer><div class=footer-top style=background:#f3f3f3><div class=container><div class=row><div class="col-lg-3 col-md-6 footer-links"><h4>Useful Links</h4><ul><li><i class="bx bx-chevron-right"></i> <a href=https://github.com/drasyl/drasyl/>GitHub Repository</a></li><li><i class="bx bx-chevron-right"></i> <a href=https://hub.docker.com/r/drasyl/drasyl>Docker Images</a></li><li><i class="bx bx-chevron-right"></i> <a href=/discord>Discord</a></li><li><i class="bx bx-chevron-right"></i> <a href=https://status.drasyl.org/>Statuspage</a></li><li><i class="bx bx-chevron-right"></i> <a rel=me href=https://mastodon.world/@drasyl>Mastodon</a></li></ul></div></div></div></div><div class="container footer-bottom clearfix"><div class=copyright>&copy; 2020-2023
<strong><span>Heiko Bornholdt and Kevin Röbert</span></strong>. All Rights Reserved</div><div class=credits></div></div></footer><a href=# class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
<script src=/vendor/aos/aos.js></script>
<script src=/vendor/bootstrap/js/bootstrap.bundle.min.js></script>
<script src=/vendor/particles/particles.min.js></script>
<script src=/js/main.min.84169354ab432ead0f853fba711e84d138e2c9f7ccc3741d9c94987cb7f2e17b.js></script>
<script src=/js/particles.min.80e008ad2d7a11be7b712a6003a336ff3cba7b5c643bbcd1c8d2d92f12113b9d.js></script></body></html>